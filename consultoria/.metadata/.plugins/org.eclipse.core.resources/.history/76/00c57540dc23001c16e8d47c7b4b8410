package br.com.mattec.consul.service.validation;

import java.util.ArrayList;
import java.util.List;

import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;

import br.com.mattec.consul.controller.exceptions.FieldMessageCustom;
import br.com.mattec.consul.dto.CadastraDto;

public class ClientInsertCpfOrPnpjValidator  implements ConstraintValidator<ClientInsertCpfOrPnpj, CadastraDto> {
	
	@Override 
	public void initialize(ClientInsertCpfOrPnpj ann) {
	 }
	 @Override
	 public boolean isValid(CadastraDto objDto, ConstraintValidatorContext context) {
	 List<FieldMessageCustom> list = new ArrayList<>();
	 
	 // inclua os testes aqui, inserindo erros na lista
	 
	 for (FieldMessageCustom e : list) {
	 context.disableDefaultConstraintViolation();
	 context.buildConstraintViolationWithTemplate(e.getMessage())
	 .addPropertyNode(e.getFieldName()).addConstraintViolation();
	 }
	 return list.isEmpty();
	 }
	}
}
